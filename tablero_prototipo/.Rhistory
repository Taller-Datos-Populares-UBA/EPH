log(197)
log(5)
shiny::runApp('LABURO/taller de datos populares/EPH/EPH/tablero_prototipo')
install.packages('gclust')
remotes::install_github("barrpet/gclust")
require(gclust)
library('gclust')
library('barrpet')
remotes::install_github("barrpet/gclust")
library(redwalk)
data("dolphins")
plot(dolphins)
require(ggraph)
dolphins %>% ggraph() + geom_node_label() + geom_edge_link()
dolphins %>% ggraph() + geom_node_label(aes(label=name)) + geom_edge_link()
dolphins %>% ggraph() + geom_edge_link() + geom_node_label(aes(label=name))
dolphins %>% ggraph() + geom_edge_link() + geom_node_label(aes(label=name,color=color))
dolphins %>% ggraph() + geom_edge_link() + geom_node_label(aes(label=name,fill=color))
data("davisclub")
davisclub %>% ggraph() + geom_edge_link() + geom_node_label(aes(label=name,fill=color))
plot(davisclub)
davisclub %>% get.vertex.attribute() %>% names()
V(davisclub)$type %>% table
davisclub %>% ggraph() + geom_edge_link() + geom_node_label(aes(label=name,fill=type))
data("football")
davisclub %>% get.vertex.attribute() %>% names()
football %>% get.vertex.attribute() %>% names()
football %>% ggraph() + geom_edge_link() + geom_node_label(aes(label=name,fill=color))
football %>% ggraph() + geom_edge_link() + geom_node_label(aes(label=name,fill=membership))
football %>% ggraph() + geom_edge_link() + geom_node_label(aes(label=name,fill=factor(membership)))
plot(football)
data("macaque")
plot(macaque)
?macaque
data("polbooks")
plot(polbooks)
data("polblogs")
plot(polblogs)
library(tidyverse)
dfhbt <- data.frame(
sim = c(88, 0.02, 0, 7, 99),
sim_dev = c(32, 0.04, .1, 11, 1),
grupo = c('General','Asian','Black','Hispanic','White')
)
dfhlat <- data.frame(
sim = c(61, 2, .2, 87, 38),
sim_dev = c(35, 5, .7, 11, 20),
grupo = c('General','Asian','Black','Hispanic','White')
)
dfhbp <- data.frame(
sim = c(94, 100, 86, 68, 94),
sim_dev = c(9, 0, 21, 16, 9),
grupo = c('General','Asian','Black','Hispanic','White')
)
dfhlap <- data.frame(
sim = c(64, 74, 49, 64, 66),
sim_dev = c(15, 21, 0, 15, 12),
grupo = c('General','Asian','Black','Hispanic','White')
)
dfh <- bind_rows(
dfhbt %>% mutate(ciudad = 'boston',tipo = 'tract'),
dfhlat %>% mutate(ciudad = 'la',tipo = 'tract'),
dfhbp %>% mutate(ciudad = 'boston',tipo = 'parque'),
dfhlap %>% mutate(ciudad = 'la',tipo = 'parque')
) %>%
mutate(sim_tipo = 'homo') %>%
mutate(grupo = factor(grupo,levels = c('General','Asian','Black','Hispanic','White')))
####
dfsbt <- data.frame(
sim = c(82.89, 83.83, 67.79, 71.57, 86.39),
grupo = c('General','Asian','Black','Hispanic','White')
)
dfslat <- data.frame(
sim = c(73.04, 72.38, 67.14, 73.3, 74.58),
grupo = c('General','Asian','Black','Hispanic','White')
)
dfsbp <- data.frame(
sim = c(80.43, 80.3, 77.35, 78.4, 81.13),
grupo = c('General','Asian','Black','Hispanic','White')
)
dfslap <- data.frame(
sim = c(68.16, 68.24, 66.71, 67.72, 69.26),
grupo = c('General','Asian','Black','Hispanic','White')
)
dfs <- bind_rows(
dfsbt %>% mutate(ciudad = 'boston',tipo = 'tract'),
dfslat %>% mutate(ciudad = 'la',tipo = 'tract'),
dfsbp %>% mutate(ciudad = 'boston',tipo = 'parque'),
dfslap %>% mutate(ciudad = 'la',tipo = 'parque')
) %>%
mutate(sim_tipo = 'kl') %>%
mutate(grupo = factor(grupo,levels = c('General','Asian','Black','Hispanic','White')))
df <- bind_rows(dfh,dfs)
df %>%
filter(sim_tipo == 'homo') %>%
ggplot(aes(x=grupo,y=sim,fill = ciudad)) +
geom_bar(stat='identity',position = 'dodge') +
facet_wrap(~tipo) +
scale_fill_manual(
name = element_blank(),
values = c('boston'='red','la'='blue'),
labels = c(c('boston'='Boston','la'='LA'))
)
df %>%
filter(sim_tipo == 'homo') %>%
ggplot(aes ( x= grupo, y = sim, color = ciudad)) +
geom_point() +
facet_wrap( ~ tipo)
df %>%
filter(sim_tipo == 'homo') %>%
ggplot(aes ( x= grupo, y = sim, color = ciudad)) +
geom_point() +
facet_wrap( ~ tipo) +
theme(legend.position = c(.7,.25))
?geom_errorbar
df %>%
filter(sim_tipo == 'homo') %>%
ggplot(aes ( x= grupo, y = sim, color = ciudad)) +
geom_point() +
geom_errorbar(aes(ymin = sim - sim_dev,ymax=y+sim_dev))
df %>%
filter(sim_tipo == 'homo') %>%
ggplot(aes ( x= grupo, y = sim, color = ciudad)) +
geom_point() +
geom_errorbar(aes(ymin = sim - sim_dev,ymax=y+sim_dev)) +
facet_wrap( ~ tipo) +
theme(legend.position = c(.7,.25))
df %>%
filter(sim_tipo == 'homo') %>%
ggplot(aes ( x= grupo, y = sim, color = ciudad)) +
geom_point() +
geom_errorbar(aes(ymin = sim - sim_dev,ymax=sim+sim_dev)) +
facet_wrap( ~ tipo) +
theme(legend.position = c(.7,.25))
df %>%
filter(sim_tipo == 'homo') %>%
filter( grupo != 'General') %>%
ggplot(aes ( x= grupo, y = sim, color = ciudad)) +
geom_point() +
facet_wrap( ~ tipo) +
theme(legend.position = c(.7,.25))
df %>%
filter(sim_tipo == 'homo') %>%
filter( grupo != 'General') %>%
ggplot(aes ( x= grupo, y = sim, color = ciudad)) +
geom_point() +
geom_abline(data = df %>%
filter(sim_tipo == 'homo',grupo == 'General'),aes(intercept = sim,color=ciudad))
df %>%
filter(sim_tipo == 'homo') %>%
filter( grupo != 'General') %>%
ggplot(aes ( x= grupo, y = sim, color = ciudad)) +
geom_point() +
geom_hline(data = df %>%
filter(sim_tipo == 'homo',grupo == 'General'),aes(intercept = sim,color=ciudad))
df %>%
filter(sim_tipo == 'homo') %>%
filter( grupo != 'General') %>%
ggplot(aes ( x= grupo, y = sim, color = ciudad)) +
geom_point() +
geom_hline(data = df %>%
filter(sim_tipo == 'homo',grupo == 'General'),aes(yintercept = sim,color=ciudad))
df %>%
filter(sim_tipo == 'homo') %>%
filter( grupo != 'General') %>%
ggplot(aes ( x= grupo, y = sim, color = ciudad)) +
geom_point() +
geom_hline(data = df %>%
filter(sim_tipo == 'homo',grupo == 'General'),aes(yintercept = sim,color=ciudad)) +
facet_wrap( ~ tipo) +
theme(legend.position = c(.7,.25))
df %>%
mutate(ciudad = case_when(
ciudad == 'boston' ~ 'Boston',
TRUE ~ 'LA')) %>%
filter(sim_tipo == 'homo') %>%
filter( grupo != 'General') %>%
ggplot(aes ( x= grupo, y = sim, color = ciudad)) +
geom_point() +
geom_hline(data = df %>%
filter(sim_tipo == 'homo',grupo == 'General'),aes(yintercept = sim,color=ciudad)) +
facet_wrap( ~ tipo) +
theme(legend.position = c(.7,.25)) +
xlab('') +
scale_color_discrete(name = 'Ciudad')
df %>%
mutate(ciudad = case_when(
ciudad == 'boston' ~ 'Boston',
TRUE ~ 'LA')) %>%
filter(sim_tipo == 'homo') %>%
filter( grupo != 'General') %>%
ggplot(aes ( x= grupo, y = sim, color = ciudad)) +
geom_point() +
geom_hline(data = df %>%
filter(sim_tipo == 'homo',grupo == 'General') %>%
mutate(ciudad = case_when(
ciudad == 'boston' ~ 'Boston',
TRUE ~ 'LA'))
,aes(yintercept = sim,color=ciudad)) +
facet_wrap( ~ tipo) +
theme(legend.position = c(.7,.25)) +
xlab('') +
scale_color_discrete(name = 'Ciudad')
df %>%
mutate(ciudad = case_when(
ciudad == 'boston' ~ 'Boston',
TRUE ~ 'LA')) %>%
filter(sim_tipo == 'homo') %>%
filter( grupo != 'General') %>%
ggplot(aes ( x= grupo, y = sim, color = ciudad,shape = ciudad)) +
geom_point() +
geom_hline(data = df %>%
filter(sim_tipo == 'homo',grupo == 'General') %>%
mutate(ciudad = case_when(
ciudad == 'boston' ~ 'Boston',
TRUE ~ 'LA'))
,aes(yintercept = sim,color=ciudad)) +
facet_wrap( ~ tipo) +
theme(legend.position = c(.7,.25)) +
xlab('') +
scale_color_discrete(name = 'Ciudad')
df %>%
mutate(ciudad = case_when(
ciudad == 'boston' ~ 'Boston',
TRUE ~ 'LA')) %>%
filter(sim_tipo == 'homo') %>%
filter( grupo != 'General') %>%
ggplot(aes ( x= grupo, y = sim, color = ciudad)) +
geom_point() +
geom_hline(data = df %>%
filter(sim_tipo == 'homo',grupo == 'General') %>%
mutate(ciudad = case_when(
ciudad == 'boston' ~ 'Boston',
TRUE ~ 'LA'))
,aes(yintercept = sim,color=ciudad)) +
facet_wrap( ~ tipo) +
theme(legend.position = c(.7,.25)) +
xlab('') +
scale_color_discrete(name = 'Ciudad')
df %>%
mutate(ciudad = case_when(
ciudad == 'boston' ~ 'Boston',
TRUE ~ 'LA')) %>%
filter(sim_tipo == 'homo') %>%
filter( grupo != 'General') %>%
ggplot(aes ( x= grupo, y = sim, color = ciudad)) +
geom_point() +
geom_hline(data = df %>%
filter(sim_tipo == 'homo',grupo == 'General') %>%
mutate(ciudad = case_when(
ciudad == 'boston' ~ 'Boston',
TRUE ~ 'LA'))
,aes(yintercept = sim,color=ciudad)) +
facet_wrap( ~ tipo) +
theme(legend.position = c(.7,.25)) +
xlab('') +
ylab('Homofilia') +
scale_color_discrete(name = 'Ciudad')
df %>%
mutate(ciudad = case_when(
ciudad == 'boston' ~ 'Boston',
TRUE ~ 'LA')) %>%
filter(sim_tipo == 'homo') %>%
filter( grupo != 'General') %>%
ggplot(aes ( x= grupo, y = sim, color = ciudad)) +
geom_point() +
geom_hline(data = df %>%
filter(sim_tipo == 'homo',grupo == 'General') %>%
mutate(ciudad = case_when(
ciudad == 'boston' ~ 'Boston',
TRUE ~ 'LA'))
,aes(yintercept = sim,color=ciudad)) +
facet_wrap( ~ tipo) +
theme(legend.position = c(.7,.25)) +
xlab('') +
ylab('Homofilia') +
scale_color_discrete(name = 'Ciudad') +
theme_bw()
df %>%
mutate(ciudad = case_when(
ciudad == 'boston' ~ 'Boston',
TRUE ~ 'LA')) %>%
filter(sim_tipo == 'homo') %>%
filter( grupo != 'General') %>%
ggplot(aes ( x= grupo, y = sim, color = ciudad)) +
geom_point() +
geom_hline(data = df %>%
filter(sim_tipo == 'homo',grupo == 'General') %>%
mutate(ciudad = case_when(
ciudad == 'boston' ~ 'Boston',
TRUE ~ 'LA'))
,aes(yintercept = sim,color=ciudad)) +
facet_wrap( ~ tipo) +
xlab('') +
ylab('Homofilia') +
scale_color_discrete(name = 'Ciudad') +
theme_bw() +
theme(legend.position = c(.7,.25))
library(osmdata)
bb <- getbb('Ciudad Autonoma de Buenos Aires')
bb
bb <- getbb('Ciudad Autonoma de Buenos Aires',format_out = 'polygon')
bb
length(bb)
plot(bb[[1]])
plot(bb[[2]])
plot(bb)
bb
plot(bb[[2]][[1]])
available_features()
available_tags('route')
opq(bbox = bb) %>%
add_osm_feature(key = 'route',value='bus')
rutas <- opq(bbox = bb) %>%
add_osm_feature(key = 'route',value='bus') %>%
osmdata_sf()
closeAllConnections()
rutas <- opq(bbox = bb) %>%
add_osm_feature(key = 'route',value='bus') %>%
osmdata_sf()
bb2 <-getbb('Boedo, Ciudad Autonoma de Buenos Aires',format_out = 'polygon')
plot(bb2[[1]][[1]])
plot(bb2[[2]][[1]])
bb2
plot(bb2)
plot(bb[[1]][[1]])
plot(bb[[1]][[1]],type='l')
lines(bb2)
rutas <- opq(bbox = bb2) %>%
add_osm_feature(key = 'route',value='bus') %>%
osmdata_sf()
closeAllConnections()
rutas <- opq(bbox = bb2) %>%
add_osm_feature(key = 'route',value='bus') %>%
osmdata_sf()
library(osmdata)
bb2 <-getbb('Boedo, Ciudad Autonoma de Buenos Aires',format_out = 'polygon')
bb <- getbb('Ciudad Autonoma de Buenos Aires',format_out = 'polygon')
bb2 <-getbb('Boedo, Ciudad Autonoma de Buenos Aires',format_out = 'polygon')
plot(bb[[1]][[1]],type='l')
lines(bb2)
rutas <- opq(bbox = bb2,timeout = 1000) %>%
add_osm_feature(key = 'route',value='bus') %>%
osmdata_sf()
rutas$osm_points
rutas$osm_lines
library(sf)
rutas$osm_lines %>% st_geometry %>% plot
rutas$osm_lines %>% st_geometry %>% plot(reset=FALSE)
rutas$bbox
bb2 %>% plot
rutas$osm_lines %>% st_geometry %>% plot(reset=FALSE)
bb2 %>% plot(add=TRUE)
bb2 %>% st_polygon %>% st_sfc(crs=4326)
bb2 %>% list %>% st_polygon %>% st_sfc(crs=4326)
bb2 %>% list %>% st_polygon %>% st_sfc(crs=4326) %>% plot(add=TRUE)
rutas$osm_lines %>% st_geometry %>% plot(reset=FALSE)
bb2 %>% list %>% st_polygon %>% st_sfc(crs=4326) %>% plot(add=TRUE)
bb2 %>% list %>% st_polygon %>% st_sfc(crs=4326) %>% plot(col='red',add=TRUE)
bb2 %>% list %>% st_polygon %>% st_sfc(crs=4326) %>% plot(col='red',reset=FALSE)
rutas$osm_lines %>% st_geometry %>% plot(add=TRUE)
rutas$osm_lines$bus
rutas$osm_lines$turn.lanes
rutas$osm_lines %>% View()
rutas$osm_lines %>% drop_na(bus) %>% View
library(tidyverse)
rutas$osm_lines %>% View()
rutas$osm_lines %>% drop_na(bus) %>% View
available_features()
available_tags('tracks')
available_tags('public_transport')
rutas <- opq(bbox = bb2,timeout = 1000) %>%
add_osm_feature(key = 'route',value='bus') %>%
add_osm_feature(key = 'public_transport',value='station') %>%
osmdata_sf()
rutas$osm_points
rutas$osm_lines
rutas$osm_polygons
paradas <- opq(bbox = bb2,timeout = 1000) %>%
#add_osm_feature(key = 'route',value='bus') %>%
add_osm_feature(key = 'public_transport',value='station') %>%
osmdata_sf()
paradas$osm_points
available_tags('public_transport')
paradas <- opq(bbox = bb2,timeout = 1000) %>%
#add_osm_feature(key = 'route',value='bus') %>%
add_osm_feature(key = 'public_transport',value='platform') %>%
osmdata_sf()
paradas$
available_tags('public_transport')
paradas$osm_lines
plot(paradas$osm_lines[[1]])
paradas$osm_points
plot(paradas$osm_points)
plot(paradas$osm_points %>% drop_na)
available_tags('public_transport')
paradas <- opq(bbox = bb2,timeout = 1000) %>%
#add_osm_feature(key = 'route',value='bus') %>%
add_osm_feature(key = 'public_transport',value='stop_position') %>%
osmdata_sf()
paradas$osm_points
paradas <- opq(bbox = bb2,timeout = 1000) %>%
#add_osm_feature(key = 'route',value='bus') %>%
add_osm_feature(key = 'public_transport',value='stop_area') %>%
osmdata_sf()
paradas$osm_points
paradas$osm_lines
available_tags('highway')
rutas <- opq(bbox = bb2,timeout = 1000) %>%
add_osm_feature(key = 'highway',value='busway') %>%
osmdata_sf()
rutas$osm_points
available_tags('highway')
rutas <- opq(bbox = bb2,timeout = 1000) %>%
add_osm_feature(key = 'highway',value='bus_stop') %>%
osmdata_sf()
rutas$osm_points
available_features('bus')
available_tags('bus')
?add_osm_feature
paradas <- opq(bbox = bb2,timeout = 1000) %>%
add_osm_feature(features = c(
"\"highway\"=\"bus_stop\"",
"\"public_transport\"=\"patform\"",
"\"public_transport\"=\"stop_position\"",
"\"public_transport\"=\"stop_area\"",
"\"type\"=\"public_transport\""
)) %>%
osmdata_sf()
paradas <- opq(bbox = bb2,timeout = 1000) %>%
add_osm_feature(features = c(
"\"highway\"=\"bus_stop\"",
"\"public_transport\"=\"patform\"",
"\"public_transport\"=\"stop_position\"",
"\"public_transport\"=\"stop_area\"",
"\"type\"=\"public_transport\""
)) %>%
osmdata_sf()
c(
"\"highway\"=\"bus_stop\"",
"\"public_transport\"=\"patform\"",
"\"public_transport\"=\"stop_position\"",
"\"public_transport\"=\"stop_area\"",
"\"type\"=\"public_transport\""
)
paradas <- opq(bbox = bb2,timeout = 1000) %>%
add_osm_feature(features = c(
"\"highway\"=\"bus_stop\"",
"\"public_transport\"=\"patform\"",
"\"public_transport\"=\"stop_position\"",
"\"public_transport\"=\"stop_area\"",
"\"type\"=\"public_transport\""
))
paradas <- opq(bbox = bb2,timeout = 1000) %>%
add_osm_features(features = c(
"\"highway\"=\"bus_stop\"",
"\"public_transport\"=\"patform\"",
"\"public_transport\"=\"stop_position\"",
"\"public_transport\"=\"stop_area\"",
"\"type\"=\"public_transport\""
)) %>%
osmdata_sf()
paradas
paradas <- opq(bbox = bb2,timeout = 1000) %>%
add_osm_features(features = c(
"\"highway\"=\"bus_stop\"",
"\"public_transport\"=\"patform\"",
"\"public_transport\"=\"stop_position\"",
"\"public_transport\"=\"stop_area\"",
"\"type\"=\"public_transport\""
)) %>%
osmdata_sf()
paradas
paradas$osm_lines
paradas$osm_multilines
paradas$osm_points
paradas$osm_points %>% View
paradas$osm_points %>% select(network)
paradas$osm_points %>% select(network) %>% drop_na()
available_features()
paradas <- opq(bbox = bb2,timeout = 1000) %>%
add_osm_feature(key = 'type',value='route') %>%
add_osm_feature(key = 'route',value='bus') %>%
osmdata_sf()
paradas$osm_lines
paradas$osm_lines %>% View
paradas <- opq(bbox = bb2,timeout = 1000) %>%
add_osm_feature(key = 'type',value='route') %>%
add_osm_feature(key = 'route',value='minibus') %>%
osmdata_sf()
paradas <- opq(bbox = bb2,timeout = 1000) %>%
add_osm_feature(key = 'type',value='route_master') %>%
add_osm_feature(key = 'route_master',value='bus') %>%
osmdata_sf()
paradas$osm_points
paradas$osm_points %>% View
paradas <- opq(bbox = bb2,timeout = 1000) %>%
add_osm_feature(key = 'type',value='route_master') %>%
osmdata_sf()
paradas$osm_polygons
paradas$osm_polygons %>% View
paradas$osm_points %>% View
setwd("~/LABURO/taller de datos populares/EPH/EPH2/EPH/tablero_prototipo")
shiny::runApp()
runApp()
runApp()
sexo
runApp()
runApp()
runApp()
runApp()
runApp()
